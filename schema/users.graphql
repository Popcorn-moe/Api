type User {
	id: ID!
	login: String!
	email: String @hasGroup(group: ADMIN)
	group: UserGroup!
	newsletter: Boolean!
	account_registered: Boolean!
	playlists: [Playlist!]! @link(collection: "playlists")
	avatar: Url
	ratings: [AnimeRating!]!
	rating_for(id: ID!): AnimeRating
	blocked: [User!]! @link(collection: "users")
	follows: [User!]! @link(collection: "users")
	followers: [User!]!
	notifications: [Notification!]!
	isFollower(id: ID!): Boolean!
}

enum UserGroup {
	ADMIN
	MODERATOR
	VIEWER
}

type AnimeRating {
	anime: Anime!
	rating: Float!
}

input UserInput {
	id: ID!
	login: String
	email: String
	group: UserGroup
	newsletter: Boolean
	account_registered: Boolean
	avatar: Url
}

extend type Mutation {
	setAvatar(file: Upload!): Result!
	updateUsers(users: [UserInput!]!): [ID!]! @hasGroup(group: ADMIN)
	blockUser(user: ID!): Boolean
	unlockUser(user: ID!): Boolean
	follow(id: ID!): Boolean! @hasGroup(group: VIEWER)
	unfollow(id: ID!): Boolean! @hasGroup(group: VIEWER)
}

extend type Query {
	me: User
	users: [User!]!
	user(name: String!): User!
	userById(id: ID!): User!
	searchUser(name: String!, limit: Int = 10): [User!]!
}
